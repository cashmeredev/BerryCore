╔══════════════════════════════════════════════════════════════╗
║              GCC-ARM 9.3.0 FIX COMMANDS                      ║
╚══════════════════════════════════════════════════════════════╝

PROBLEM: gcc 9.3.0 can't find stdio.h and spawning processes fails
OLD GCC: 4.6.3 works fine
NEW GCC: 9.3.0 installed but broken

═══════════════════════════════════════════════════════════════

DIAGNOSTIC STEP 1: Run diagnostic script
───────────────────────────────────────────────────────────────
sh DIAGNOSE.sh > /tmp/gcc_diag.txt
cat /tmp/gcc_diag.txt

Look for:
  - Where gcc searches for headers
  - If stdio.h exists anywhere
  - If assembler/linker are found


═══════════════════════════════════════════════════════════════

FIX OPTION 1: Use the old working GCC (4.6.3)
───────────────────────────────────────────────────────────────
The old GCC works perfectly. You can just use it:

# Remove the broken gcc-arm 9.3.0
# (This will revert to the working 4.6.3)
cd $NATIVE_TOOLS
rm -rf bin/gcc bin/g++ bin/c++
rm -rf lib/gcc/arm-blackberry-qnx8eabi/9.3.0
rm -rf libexec/gcc/arm-blackberry-qnx8eabi/9.3.0

# Reload environment
source $NATIVE_TOOLS/env.sh

# Verify old gcc is back
gcc --version
# Should show 4.6.3

# Test
sh test.sh


═══════════════════════════════════════════════════════════════

FIX OPTION 2: Point GCC 9.3.0 to system headers manually
───────────────────────────────────────────────────────────────
# Create wrapper script
cat > $NATIVE_TOOLS/bin/gcc-9 << 'EOF'
#!/bin/sh
SYSROOT="$QNX_TARGET"
exec /path/to/real/gcc-9.3.0 --sysroot=$SYSROOT "$@"
EOF

chmod +x $NATIVE_TOOLS/bin/gcc-9

# Test with explicit sysroot
gcc --sysroot=$QNX_TARGET -o /tmp/test /tmp/test.c


═══════════════════════════════════════════════════════════════

FIX OPTION 3: Check if gcc-arm package is incomplete
───────────────────────────────────────────────────────────────
The gcc-arm 9.3.0 port might be missing critical files.

Check what was installed:
unzip -l $NATIVE_TOOLS/../dev-gcc-arm-9.3.0.zip | grep -E "bin/gcc|include|stdio"

Expected files:
  bin/gcc                    (compiler driver)
  bin/g++                    (C++ compiler)
  bin/as                     (assembler)
  bin/ld                     (linker)
  libexec/gcc/.../cc1        (C compiler)
  libexec/gcc/.../cc1plus    (C++ compiler)
  lib/gcc/.../include/       (GCC headers)
  
System headers should come from QNX_TARGET!


═══════════════════════════════════════════════════════════════

FIX OPTION 4: Check QNX_TARGET variable
───────────────────────────────────────────────────────────────
echo $QNX_TARGET
# Should be: /accounts/1000/shared/misc/berrycore/target_10_3_1_995/qnx6

# Check if system headers exist there
ls $QNX_TARGET/usr/include/stdio.h
ls $QNX_TARGET/usr/include/stdlib.h
ls $QNX_TARGET/usr/include/string.h

# If these don't exist, that's the problem!
# The system headers are missing.


═══════════════════════════════════════════════════════════════

FIX OPTION 5: Compile with explicit include path
───────────────────────────────────────────────────────────────
# Find where stdio.h actually is
find $NATIVE_TOOLS -name stdio.h

# If found at (for example): /accounts/.../include/stdio.h
# Compile with explicit path:
gcc -I/path/to/includes -o /tmp/test /tmp/test.c


═══════════════════════════════════════════════════════════════

TEMPORARY WORKAROUND: Use gcc 4.6.3 (it works!)
───────────────────────────────────────────────────────────────
The base BerryCore GCC 4.6.3 is working perfectly!

For now, just use it. It's good enough for most tasks:
- Compiling C programs ✓
- Compiling C++ programs ✓
- Creating binaries that run on BB10 ✓

# Just make sure you're using the working one
which gcc
gcc --version
# If it says 9.3.0, switch back to 4.6.3


═══════════════════════════════════════════════════════════════

RECOMMENDED ACTION
───────────────────────────────────────────────────────────────
Run the diagnostic script and send me the output:

sh DIAGNOSE.sh > /tmp/gcc_diag.txt
cat /tmp/gcc_diag.txt

I need to see:
1. Where GCC is looking for headers
2. Where stdio.h actually is
3. If QNX_TARGET has the system headers
4. What the actual error messages are from verbose compilation

Then I can fix the gcc-arm port properly!


═══════════════════════════════════════════════════════════════

IMPORTANT NOTE
───────────────────────────────────────────────────────────────
The gcc-arm 9.3.0 port appears to be missing either:
  
  A) System include files (stdio.h, stdlib.h, etc.)
     These should be in $QNX_TARGET/usr/include/
  
  B) Proper configuration (gcc doesn't know where to look)
  
  C) Required binaries (as, ld, cc1, etc.)
     These should be in libexec/gcc/

The old gcc 4.6.3 has all of this configured correctly.


═══════════════════════════════════════════════════════════════

QUICK FIX TO TRY RIGHT NOW
───────────────────────────────────────────────────────────────
# See where old gcc looks for headers
/usr/bin/gcc-4.6.3 -v test.c 2>&1 | grep "search starts"

# Try making gcc 9.3.0 look there too
export C_INCLUDE_PATH="$QNX_TARGET/usr/include"
export CPLUS_INCLUDE_PATH="$QNX_TARGET/usr/include"

# Now try compiling
gcc -o /tmp/test /tmp/test.c


╔══════════════════════════════════════════════════════════════╗
║  Run DIAGNOSE.sh and send output so I can create proper fix  ║
╚══════════════════════════════════════════════════════════════╝

